/*! blackbeard vbeta | (c) 2017 Chris Ferdinandi | LicenseRef-All Rights Reserved License | http://github.com/mashery/blackbeard */
!(function(){function e(e){return m.then((function(t){for(var n=0,o=t.length;n<o;n++)if(t[n].path===e)return t[n].size}))}function t(){for(var t in components){var n=components[t];for(var o in n)if("meta"!==o){var a=n[o].files[f?"minified":"dev"],r=a.paths;r.forEach((function(n){var r=p[n]=p[n]||{};r.size?i(t,o):(function(t,o){e(n).then((function(e){e&&(r.size=e,a.size+=r.size,i(t,o))}))})(t,o)}))}}}function n(e){return new Promise(function(t,n){$u.xhr({url:e,callback:function(e){e.status<400&&e.responseText?t(e.responseText):n()}})})}function o(e){return Math.round(100*e/1024)/100+"KB"}function i(e,t){var i={js:0,css:0},r={js:0,css:0};for(var s in components){var c=components[s],l=!0;for(var u in c){var h=c[u];if(h.enabled||u==t){h.files[f?"minified":"dev"].paths.forEach((function(e){if(p[e]){var o=p[e],a=e.match(/\.(\w+)$/)[1],s=o.size||0;h.enabled&&(o.contentsPromise||(o.contentsPromise=n(e)),i[a]+=s),u==t&&(r[a]+=s)}}))}"meta"===u||h.enabled||(l=!1)}c.meta.addCheckAll&&($('input[name="check-all-'+s+'"]').checked=l)}i.all=i.js+i.css,t&&(r.all=r.js+r.css,$u.element.prop($('label[data-id="'+t+'"] .filesize'),{textContent:o(r.all),title:(r.js?Math.round(100*r.js/r.all)+"% JavaScript":"")+(r.js&&r.css?" + ":"")+(r.css?Math.round(100*r.css/r.all)+"% CSS":"")})),$("#filesize").textContent=o(i.all),$u.element.prop($("#percent-js"),{textContent:Math.round(100*i.js/i.all)+"%",title:o(i.js)}),$u.element.prop($("#percent-css"),{textContent:Math.round(100*i.css/i.all)+"%",title:o(i.css)}),a()}function a(){0!==y&&clearTimeout(y),y=setTimeout(c,500)}function r(e,t,n){if(!n){n=[];for(var o in e)n.push(o)}for(var i=0;i<n.length;){var a=n[i],r=i,s=!1;for(var c in e[a][t])if((r=n.indexOf(e[a][t][c]))>i){s=!0;break}s?(tmp=n[i],n[i]=n[r],n[r]=tmp):i++}return n}function s(e){return r(e,"require",r(e,"after"))}function c(){var e=[],t={};for(var n in components)for(var o=components[n],i=s(o),a=0;a<i.length;a++){var r=i[a];if("meta"!==r){var c=o[r];c.enabled&&("core"!==n&&(t[n]=t[n]||[],t[n].push(r)),c.files[f?"minified":"dev"].paths.forEach((function(t){if(p[t]){var n=t.match(/\.(\w+)$/)[1];e.push({contentsPromise:p[t].contentsPromise,path:t,type:n})}})))}}var u=$("#download .error");u.style.display="",l(e).then((function(e){var n=e.code,o=e.errors;o.length&&(u.style.display="block",u.innerHTML="",$u.element.contents(u,o));var i=window.location.href.split("?")[0]+"?";for(var a in t)i+=a+"="+t[a].join("+")+"&";i="/* "+i.replace(/&$/,"")+" */";for(var r in n){var s=$("#download-"+r+" code");s.textContent=i+"\n"+n[r],Prism.highlightElement(s,!0),$("#download-"+r+" .download-button").href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(i+"\n"+n[r])}}))}function l(e){var t=0,n=e.length,o={js:"",css:""},i=[],a=function(r){if(t<n){var s=e[t];s.contentsPromise.then((function(e){o[s.type]+=e+("js"!==s.type||/;\s*$/.test(e)?"":";")+"\n",t++,a(r)})),s.contentsPromise.catch((function(){i.push($u.element.create({tag:"p",prop:{textContent:'An error occurred while fetching the file "'+s.path+'".'}})),t++,a(r)}))}else r({code:o,errors:i})};return new Promise(a)}var p={},u=$("form"),f=!0,h={},m=new Promise(function(e){$u.xhr({url:"https://api.github.com/repos/PrismJS/prism/git/trees/gh-pages?recursive=1",callback:function(t){t.status<400&&e(JSON.parse(t.responseText).tree)}})}),d=window.location.search.match(/(?:languages|plugins)=[-+\w]+|themes=[-\w]+/g);d&&d.forEach((function(e){var t=e.split("=",2),n=t[0],o=t[1].split("+");if("meta"!==n&&"core"!==n&&components[n]){for(var i in components[n])components[n][i].option&&delete components[n][i].option;o.forEach((function(e){if("meta"!==e&&components[n][e])for(var t=e;t&&components[n][t]&&"default"!==components[n][t].option;)"string"==typeof components[n][t]&&(components[n][t]={title:components[n][t]}),components[n][t].option="default",t=components[n][t].require}))}}));for(var v in components){var g=components[v];g.meta.section=$u.element.create("section",{className:"options",id:"category-"+v,contents:{tag:"h1",contents:v.charAt(0).toUpperCase()+v.slice(1)},inside:"#components"}),g.meta.addCheckAll&&$u.element.create("label",{attributes:{"data-id":"check-all-"+v},contents:[{tag:"input",properties:{type:"checkbox",name:"check-all-"+v,value:"",checked:!1,onclick:(function(e,t){return function(){var n=this;$$('input[name="download-'+e+'"]').forEach((function(e){t[e.value].enabled=e.checked=n.checked})),i(e)}})(v,g)}},"Select/unselect all"],inside:g.meta.section});for(var k in g)if("meta"!==k){var b=!1,w=!1,j=g[k].option||g.meta.option;switch(j){case"mandatory":w=!0;case"default":b=!0}var S=g.meta.path.replace(/\{id}/g,k),x=g[k]={title:g[k].title||g[k],noCSS:g[k].noCSS||g.meta.noCSS,noJS:g[k].noJS||g.meta.noJS,enabled:b,require:"string"===$u.type(g[k].require)?[g[k].require]:g[k].require,after:"string"===$u.type(g[k].after)?[g[k].after]:g[k].after,owner:g[k].owner,files:{minified:{paths:[],size:0},dev:{paths:[],size:0}}};if(x.require&&x.require.forEach((function(e){h[e]=(h[e]||[]).concat(k)})),g[k].noJS||/\.css$/.test(S)||(x.files.minified.paths.push(S.replace(/(\.js)?$/,".min.js")),x.files.dev.paths.push(S.replace(/(\.js)?$/,".js"))),!g[k].noCSS&&!/\.js$/.test(S)||/\.css$/.test(S)){var C=S.replace(/(\.css)?$/,".css");x.files.minified.paths.push(C),x.files.dev.paths.push(C)}$u.element.create("label",{attributes:{"data-id":k},contents:[{tag:"input",properties:{type:g.meta.exclusive?"radio":"checkbox",name:"download-"+v,value:k,checked:b,disabled:w,onclick:(function(e,t,n){return function(){$$('input[name="'+this.name+'"]').forEach((function(e){n[e.value].enabled=e.checked})),n[e].require&&this.checked&&n[e].require.forEach((function(e){var t=$('label[data-id="'+e+'"] > input');t.checked=!0,t.onclick()})),h[e]&&!this.checked&&h[e].forEach((function(e){var t=$('label[data-id="'+e+'"] > input');t.checked=!1,t.onclick()})),i(t,e)}})(k,v,g)}},g.meta.link?{tag:"a",properties:{href:g.meta.link.replace(/\{id}/g,k)},contents:x.title}:x.title,g[k].owner?{tag:"a",properties:{href:"http://github.com/"+g[k].owner,className:"owner",target:"_blank"},contents:g[k].owner}:" ",{tag:"strong",className:"filesize"}],inside:g.meta.section})}}u.elements.compression[0].onclick=u.elements.compression[1].onclick=function(){f=!!+this.value,t()},t();var y=0})();