/*! blackbeard vbeta | (c) 2017 Chris Ferdinandi | LicenseRef-All Rights Reserved License | http://github.com/mashery/blackbeard */
var customizer=function(){"use strict";var n,t,e,o,i,c,s,r,a,u,d="https://api.github.com/repos/mashery/blackbeard/contents/dist/",l=document.querySelector("#download-custom-js"),f=document.querySelector("#download-custom-css"),m=document.querySelector("#download-size"),g=document.querySelector("#download-init"),h=function(){var n="";if(c.length>0&&(n+=c),s.length>0&&(n+="\n\nwindow.addEventListener('portalAfterRender', function () {\n"+s+"}, false)"),n.length<1)return void(g.innerHTML="// No initialization needed...");g.innerHTML=n.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;").trim(),"Prism"in window&&Prism.highlightAll()},p=function(){if(e.length<1)return void h();e.forEach((function(n){var t=n.getAttribute("value");n.classList.contains("has-inits")?atomic.ajax({url:d+"inits/"+t+".js"}).success((function(n){c+=atob(n.content)+"\n\n",h()})).error((function(n){h(),console.error(t+" wasn't found")})):h(),n.classList.contains("has-events")?atomic.ajax({url:d+"events/"+t+".js"}).success((function(n){s+="\t"+atob(n.content).replace(new RegExp("\n","g"),"\n\t")+"\n",h()})).error((function(n){h(),console.error(t+" wasn't found")})):h()}))},v=function(){atomic.ajax({url:d+"inits/"+t+".js"}).success((function(n){c=atob(n.content),p()})).error((function(n){p(),console.error(t+" wasn't found")}))},b=function(n){return Math.round(100*n/1024)/100+"kb"},w=function(){var n=r+a,t=Math.round(100*r/n)+"%",e=Math.round(100*a/n)+"%";m.innerHTML="<p>Total Filesize: <strong>"+b(n)+"</strong> ("+t+" JavaScript and "+e+" CSS)</p>"},L=function(e,o){if(o.length<1)return void(e.innerHTML="No "+("download-custom-js"===e.id?"JavaScript":"CSS")+" Needed");e.classList.remove("disabled"),e.href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(o),e.innerHTML="Download "+("download-custom-js"===e.id?"JavaScript":"CSS"),e.download=t+n+("download-custom-js"===e.id?".js":".css"),w()},j=function(){l.classList.add("disabled"),l.href="",l.innerHTML="Generating...",f.classList.add("disabled"),f.href="",f.innerHTML="Generating...",m.innerHTML="",g.innerHTML="Generating..."},S=function(){atomic.ajax({url:d+"css/overrides"+n+".css"}).success((function(n){i+=atob(n.content),a+=n.size,L(f,i)})).error((function(n){}))},M=function(){if(e.length<1)return L(l,o),L(f,i),void S();var t=e.length-1;e.forEach((function(e,c){var s=e.getAttribute("value");e.classList.contains("has-js")?atomic.ajax({url:d+"js/"+s+n+".js"}).success((function(n){o+=atob(n.content),r+=n.size,L(l,o)})).error((function(n){})):L(l,o),e.classList.contains("has-css")?atomic.ajax({url:d+"css/"+s+n+".css"}).success((function(n){i+=atob(n.content),a+=n.size,L(f,i)})).error((function(n){})):L(f,i),c===t&&S()}))},T=function(){atomic.ajax({url:d+"css/"+t+n+".css"}).success((function(n){i=atob(n.content),a+=n.size,M()})).error((function(n){}))},x=function(){j(),n="production"===document.querySelector('input[name="compression"]:checked').getAttribute("value")?".min.beta":"",t=document.querySelector('input[name="layout"]:checked').getAttribute("value"),e=document.querySelectorAll('input[name="plugins"]:checked'),o="",i="",c="",s="",r=0,a=0,T(),v()},y=function(){u&&clearTimeout(u),u=setTimeout(x,500)},H=function(n){n.target.closest('input[name="compression"], input[name="layout"], input[name="plugins"]')&&y()};if(!l||!f)return void document.removeEventListener("click",H,!1);document.addEventListener("click",H,!1),y()};