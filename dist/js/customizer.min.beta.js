/*! blackbeard vbeta | (c) 2017 Chris Ferdinandi | LicenseRef-All Rights Reserved License | http://github.com/mashery/blackbeard */
var customizer=function(){"use strict";var n,t,e,o,i,c,s,r,a,u,l="https://api.github.com/repos/mashery/blackbeard/contents/dist/",d=document.querySelector("#download-custom-js"),f=document.querySelector("#download-custom-css"),m=document.querySelector("#download-size"),h=document.querySelector("#download-init"),g=function(){var n="";if(c.length>0&&(n+=c),s.length>0&&(n+="\n\nwindow.addEventListener('portalAfterRender', function () {\n"+s+"}, false)"),console.log(n),n.length<1)return void(h.innerHTML="// No initialization needed...");h.innerHTML=n.replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;").trim(),"Prism"in window&&Prism.highlightAll()},p=function(){if(e.length<1)return void g();e.forEach((function(n){var t=n.getAttribute("value");n.classList.contains("has-inits")?atomic.ajax({url:l+"inits/"+t+".js"}).success((function(n){c+=atob(n.content)+"\n\n",g()})).error((function(n){g(),console.error(t+" wasn't found")})):g(),n.classList.contains("has-events")?atomic.ajax({url:l+"events/"+t+".js"}).success((function(n){s+="\t"+atob(n.content)+"\n",g()})).error((function(n){g(),console.error(t+" wasn't found")})):g()}))},v=function(){atomic.ajax({url:l+"inits/"+t+".js"}).success((function(n){c=atob(n.content),p()})).error((function(n){p(),console.error(t+" wasn't found")}))},b=function(n){return Math.round(100*n/1024)/100+"kb"},L=function(){var n=r+a,t=Math.round(100*r/n)+"%",e=Math.round(100*a/n)+"%";m.innerHTML="<p>Total Filesize: <strong>"+b(n)+"</strong> ("+t+" JavaScript and "+e+" CSS)</p>"},j=function(e,o){if(o.length<1)return void(e.innerHTML="No "+("download-custom-js"===e.id?"JavaScript":"CSS")+" Needed");e.classList.remove("disabled"),e.href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(o),e.innerHTML="Download "+("download-custom-js"===e.id?"JavaScript":"CSS"),e.download=t+n+("download-custom-js"===e.id?".js":".css"),L()},w=function(){d.classList.add("disabled"),d.href="",d.innerHTML="Generating...",f.classList.add("disabled"),f.href="",f.innerHTML="Generating...",m.innerHTML="",h.innerHTML="Generating..."},S=function(){atomic.ajax({url:l+"css/overrides"+n+".css"}).success((function(n){i+=atob(n.content),styesSize+=n.size,j(f,i)})).error((function(n){}))},M=function(){if(e.length<1)return j(d,o),void j(f,i);var t=e.length-1;e.forEach((function(e,c){var s=e.getAttribute("value");e.classList.contains("has-js")?atomic.ajax({url:l+"js/"+s+n+".js"}).success((function(n){o+=atob(n.content),r+=n.size,j(d,o)})).error((function(n){})):j(d,o),e.classList.contains("has-css")?atomic.ajax({url:l+"css/"+s+n+".css"}).success((function(n){i+=atob(n.content),a+=n.size,j(f,i)})).error((function(n){})):j(f,i),c===t&&S()}))},T=function(){atomic.ajax({url:l+"css/"+t+n+".css"}).success((function(n){i=atob(n.content),a+=n.size,M()})).error((function(n){}))},y=function(){w(),n="production"===document.querySelector('input[name="compression"]:checked').getAttribute("value")?".min.beta":"",t=document.querySelector('input[name="layout"]:checked').getAttribute("value"),e=document.querySelectorAll('input[name="plugins"]:checked'),o="",i="",c="",s="",r=0,a=0,T(),v()},x=function(){u&&clearTimeout(u),u=setTimeout(y,500)},z=function(n){n.target.closest('input[name="compression"], input[name="layout"], input[name="plugins"]')&&x()};if(!d||!f)return void document.removeEventListener("click",z,!1);document.addEventListener("click",z,!1),x()};