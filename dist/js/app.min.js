/*! blackbeard v0.0.1 | (c) 2017 Chris Ferdinandi | BSD-3-Clause License | http://github.com/mashery/blackbeard */
!(function(e,a){"function"==typeof define&&define.amd?define([],a(e)):"object"==typeof exports?module.exports=a(e):e.atomic=a(e)})("undefined"!=typeof global?global:this.window||this.global,(function(e){"use strict";var a,n={},t=!!e.XMLHttpRequest&&!!e.JSON,r={type:"GET",url:null,data:{},callback:null,headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",withCredentials:!1},o=function(){for(var e={},a=0;a<arguments.length;a++){var n=arguments[a];!(function(a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&("[object Object]"===Object.prototype.toString.call(a[n])?e[n]=o(!0,e[n],a[n]):e[n]=a[n])})(n)}return e},s=function(e){var n;if("text"!==a.responseType&&""!==a.responseType)return[e.response,e];try{n=JSON.parse(e.responseText)}catch(a){n=e.responseText}return[n,e]},i=function(e){var a="";for(var n in e)e.hasOwnProperty(n)&&(a.length>0&&(a+="&"),a+=encodeURI(n+"="+e[n]));return a},c=function(){var e={success:function(){},error:function(){},always:function(){}},n={success:function(a){return e.success=a,n},error:function(a){return e.error=a,n},always:function(a){return e.always=a,n}},t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState){var a=s(t);t.status>=200&&t.status<300?e.success.apply(e,a):e.error.apply(e,a),e.always.apply(e,a)}},t.open(a.type,a.url,!0),t.responseType=a.responseType;for(var r in a.headers)a.headers.hasOwnProperty(r)&&t.setRequestHeader(r,a.headers[r]);return a.withCredentials&&(t.withCredentials=!0),t.send(i(a.data)),n},l=function(){var n=e.document.getElementsByTagName("script")[0],t=e.document.createElement("script");a.data.callback=a.callback,t.src=a.url+(a.url.indexOf("?")+1?"&":"?")+i(a.data),n.parentNode.insertBefore(t,n),t.onload=function(){this.remove()}};return n.ajax=function(e){if(t)return a=o(r,e||{}),"jsonp"===a.type.toLowerCase()?l():c()},n}));var getNav=function(e){for(var a=[],n=mashery.dom.querySelectorAll(e),t=0;t<n.length;t++)a.push({label:n[t].innerHTML,url:n[t].href});return a},getContent=function(e){var a=window.mashery.dom,n=window.mashery.content;if(n.navPrimary=getNav("#local a"),n.navSecondary=getNav("#footer > ul a"),"page"===e&&(n.main=a.querySelector("#main").innerHTML),"docs"===e&&(n.main=a.querySelector("#main").innerHTML,n.secondary=a.querySelector("#sub ul").innerHTML),"signin"===e){var t=a.querySelector("#signin form");n.main='<form action="'+t.action+'" method="post" enctype="multipart/form-data">'+t.innerHTML+"</form>"}if("register"===e){var r=a.querySelector("#member-register");n.main='<form action="'+r.action+'" method="post" enctype="multipart/form-data">'+r.innerHTML+"</form>"}},getContentType=function(e){var a=null;return e.classList.contains("please-login")?a="pleaseLogin":e.classList.contains("page-page")?a="page":e.classList.contains("page-docs")?a="docs":e.classList.contains("page-ioDocs")?a="ioDocs":e.classList.contains("page-forum")?a=e.classList.contains("topics")?"forumTopics":e.classList.contains("topic-add")?"formAdd-Topic":e.classList.contains("read")?"forumSingle":e.classList.contains("recent")?"forumRecent":"forumAll":e.classList.contains("page-blog")?a=e.classList.contains("browse")?"blogAll":"blogSingle":e.classList.contains("page-apps")?e.classList.contains("mykeys")?a="accountKeys":e.classList.contains("myapps")&&(a="accountApps"):e.classList.contains("page-member")?a=e.classList.contains("email")?"accountEmail":e.classList.contains("passwd")?"accountPassword":e.classList.contains("register")?"register":"accountManage":e.classList.contains("page-profile")?a="profile":e.classList.contains("page-login")?a="signin":e.classList.contains("page-search")?a="search":e.classList.contains("page-logout")?a="logout":e.classList.contains("page-contact")&&(a="contact"),a},removeCSS=function(e){"use strict";for(var a=document.getElementsByTagName("link"),n=new RegExp(e),t=a.length;t>=0;t--)if(a[t]&&null!==a[t].href&&n.test(a[t].href))return a[t].parentNode.removeChild(a[t]),a[t]},setupMashery=function(){var e=document.querySelector("#page"),a=document.createElement("div");a.innerHTML=e.innerHTML;var n=a.querySelector("#user-nav .dashboard a"),t=a.querySelector("#mashery-logout-form");window.mashery={},window.mashery.dom="dom"in window.mashery?window.mashery.dom:a,window.mashery.loggedIn=!("undefined"==typeof mashery_info||!mashery_info||!mashery_info.username),window.mashery.username=window.mashery.loggedIn?mashery_info.username:null,window.mashery.isAdmin=!!a.querySelector("#user-nav .dashboard.toggle"),window.mashery.area=a.querySelector("#branding-logo").innerHTML.trim(),window.mashery.dashboard=n||null,window.mashery.logout=t||null,window.mashery.contentType=getContentType(document.body),window.mashery.content={main:null,secondary:null,repeating:{}},e.parentNode.removeChild(e)};setupMashery(),document.querySelector("#app")||loadPlaceholder(),removeCSS("localdev.css"),removeCSS("Mashery-base.css"),removeCSS("mashery-blue.css"),removeCSS("print-defaults.css"),"ioDocs"===mashery.contentType&&(removeCSS("Iodocs/style.css"),removeCSS("alpaca.min.css")),getContent(window.mashery.contentType);var loadPortal=(function(){"use strict";var e,a={},n={logo:null,templates:{layout:'\x3c!-- Skip Nav Link --\x3e<a class="screen-reader screen-reader-focusable" href="#main">Skip to content</a>{{navUser}}{{navPrimary}}{{main}}<footer id="footer">{{footer1}}{{navSecondary}}{{footer2}}</footer>',userNav:'<div class="container"><ul id="nav-user-list" class="list-inline text-small text-muted padding-top-small padding-bottom-small no-margin-bottom text-right">{{navItemsUser}}</ul></div>',primaryNav:'<div class="nav-wrap nav-collapse container padding-top-small padding-bottom-small"><a class="logo" href="/">{{logo}}</a><a role="button" class="nav-toggle" data-nav-toggle="#primary-nav-menu" href="#">Menu</a><div class="nav-menu" id="primary-nav-menu"><ul class="nav" id="primary-nav-list">{{navItemsPrimary}}</ul></div></div>',secondaryNav:'<div class="container"><ul id="nav-secondary-list">{{navItemsSecondary}}</ul>',footer1:'<div class="container"><hr></div>',footer2:'<div class="container"><p>{{masheryMade}}</p></div>',page:'<div class="container">{{content}}</div>',docs:'<div class="container"><div class="row"><div class="grid-two-thirds">{{content}}</div><div class="grid-third"><h2>In the Docs</h2><ul>{{nav}}</ul></div></div></div>',signin:'<div class="container"><div class="row"><div class="grid-half"><h1>{{heading}}</h1>{{subheading}}{{form}}</div><div class="grid-half">{{about}}</div></div></div>',register:'<div class="container"><div class="row"><div class="grid-two-thirds"><h1>{{heading}}</h1>{{subheading}}{{form}}{{terms}}</div><div class="grid-third">{{about}}</div></div></div>',accountManage:'<div class="container"><h1>{{label.headingMyApiKeys}}</h1><ul id="nav-account"><li><a href="{{keys}}">{{label.keys}}</a></li><li><a href="{{apps}}">{{label.apps}}</a></li><li><a href="{{account}}">{{label.account}}</a></li></ul><p>{{label.noKeys}}</p></div>',logout:'<div class="container"><p>This content needs to get created.</p></div>',ioDocs:'<div class="container"><p>This content needs to get created.</p></div>',contact:'<div class="container"><p>This content needs to get created.</p></div>',search:'<div class="container"><p>This content needs to get created.</p></div>'},labels:{userNav:{signin:"Sign In",register:"Register",account:"My Account",dashboard:"Dashboard",signout:"Sign Out"},account:{headingMyApiKeys:"My API Keys",headingMyApps:"My Apps",headingAccount:"Manage Account",keys:"Keys",apps:"Applications",account:"Manage Account",noKeys:"You don't have any keys yet."},signin:{heading:"Sign In",subheading:"<p>Sign in to {{area}} using your Mashery ID.</p>",submit:"Sign In",sidebar:'<h2>Register</h2><p><a href="{{register}}">Create an account</a> to access stagingcs9.mashery.com. Your account information can then be used to access other APIs on the Mashery API Network.</p><h2>What is Mashery?</h2><p><a href="http://mashery.com">Mashery</a> powers APIs of leading brands in retail, media, business services, software, and more. By signing in to a Mashery powered portal, you can gain access to Mashery\'s base of API providers. All with a single Mashery ID.</p><p><a class="btn" href="{{register}}">Register a Mashery ID</a></p>'},register:{heading:"Register for an Account",subheading:"<p>Register a new Mashery ID to access {{area}}.</p>",submit:"Register",sidebar:"<h2>No Spam Guarantee</h2><p>We hate spam. We love our users. We promise to never sell or share any of your private information.</p>",privacyPolicy:""}},callbacks:{beforeRenderLayout:function(){},afterRenderLayout:function(){},beforeRender:function(){},afterRender:function(){},beforeRenderUserNav:function(){},afterRenderUserNav:function(){},beforeRenderPrimaryNav:function(){},afterRenderPrimaryNav:function(){},beforeRenderSecondaryNav:function(){},afterRenderSecondaryNav:function(){},beforeRenderFooter:function(){},afterRenderFooter:function(){},beforeRenderMain:function(){},afterRenderMain:function(){}}},t={page:{template:function(){return c(e.templates.page,"page")}},docs:{placeholder:"{{docs}}",url:"/docs",template:function(){return c(e.templates.docs,"docs")}},signin:{placeholder:"{{signin}}",url:"/login/login",template:function(){return c(e.templates.signin,"signin")}},register:{placeholder:"{{register}}",url:"/member/register",template:function(){return c(e.templates.register,"register")}},accountManage:{placeholder:"{{account}}",url:"/apps/mykeys",template:function(){return c(e.templates.account,"account")}},accountApps:{placeholder:"{{apps}}",url:"/apps/myapps",template:null},accountKeys:{placeholder:"{{keys}}",url:"/apps/mykeys",template:null},"dashboard.html":{placeholder:"{{dashboard}}",url:window.mashery.dashboard?window.mashery.dashboard:"#",template:null},logout:{placeholder:"{{logout}}",url:"/logout/logout",template:function(){return c(e.templates.logout,"logout")}},ioDocs:{placeholder:"{{iodocs}}",url:"/io-docs",template:function(){return c(e.templates.ioDocs,"ioDocs")}},contact:{placeholder:"{{contact}}",url:"/contact",template:function(){return c(e.templates.contact,"contact")}},search:{placeholder:"{{search}}",url:"/search",template:function(){return c(e.templates.search,"search")}}},r={area:{placeholder:"{{area}}",text:window.mashery.area},username:{placeholder:"{{username}}",text:window.mashery.username},logo:{placeholder:"{{logo}}",text:function(){return e.logo?e.logo:window.mashery.area}},navItemsUser:{placeholder:"{{navItemsUser}}",text:function(){return l()}},navItemsPrimary:{placeholder:"{{navItemsPrimary}}",text:function(){return d(window.mashery.content.navPrimary)}},navItemsSecondary:{placeholder:"{{navItemsSecondary}}",text:function(){return d(window.mashery.content.navSecondary)}},registerPolicy:{placeholder:"{{registerPolicy}}",text:function(){return e.labels.register.privacyPolicy}},masheryMade:{placeholder:"{{masheryMade}}",text:'<a id="mashery-made-logo" href="http://mashery.com"><img src="https://support.mashery.com/public/Mashery/images/masherymade.png"></a>'}},o={layout:{navUser:{placeholder:"{{navUser}}",text:'<nav id="nav-user"></nav>'},navPrimary:{placeholder:"{{navPrimary}}",text:'<nav id="nav-primary"></nav>'},navSecondary:{placeholder:"{{navSecondary}}",text:'<nav id="nav-secondary"></nav>'},main:{placeholder:"{{main}}",text:'\x3c!-- tabindex="-1" hack for skipnav link: https://code.google.com/p/chromium/issues/detail?id=37721 --\x3e<main class="tabindex" tabindex="-1" id="main"></main>'},footer1:{placeholder:"{{footer1}}",text:'<div id="footer-content-1"></div>'},footer2:{placeholder:"{{footer2}}",text:'<div id="footer-content-2"></div>'}},page:{content:{placeholder:"{{content}}",text:window.mashery.content.main}},docs:{content:{placeholder:"{{content}}",text:window.mashery.content.main},nav:{placeholder:"{{nav}}",text:window.mashery.content.secondary}},signin:{heading:{placeholder:"{{heading}}",text:function(){return e.labels.signin.heading}},subheading:{placeholder:"{{subheading}}",text:function(){return e.labels.signin.subheading}},form:{placeholder:"{{form}}",text:window.mashery.content.main},about:{placeholder:"{{about}}",text:function(){return e.labels.signin.sidebar}}},register:{heading:{placeholder:"{{heading}}",text:function(){return e.labels.register.heading}},subheading:{placeholder:"{{subheading}}",text:function(){return e.labels.register.subheading}},form:{placeholder:"{{form}}",text:window.mashery.content.main},terms:{placeholder:"{{terms}}",text:function(){return'<div id="registration-terms-of-service"><p>By clicking the "Register" button, I certify that I have read and agree to {{privacyPolicy}}the <a href="http://www.mashery.com/terms/">Mashery Terms of Service</a> and <a href="http://www.mashery.com/privacy/">Privacy Policy</a>.</p></div>'}},about:{placeholder:"{{about}}",text:function(){return e.labels.register.sidebar}},privacyPolicy:{placeholder:"{{privacyPolicy}}",text:function(){return e.labels.register.privacyPolicy}}},account:{headingMyApiKeys:{placeholder:"{{label.headingMyApiKeys}}",text:function(){return e.labels.account.headingMyApiKeys}},headingMyApps:{placeholder:"{{label.headingMyApps}}",text:function(){return e.labels.account.headingMyApps}},headingAccount:{placeholder:"{{label.headingAccount}}",text:function(){return e.labels.account.headingAccount}},keys:{placeholder:"{{label.keys}}",text:function(){return e.labels.account.keys}},apps:{placeholder:"{{label.apps}}",text:function(){return e.labels.account.apps}},account:{placeholder:"{{label.account}}",text:function(){return e.labels.account.account}},noKeys:{placeholder:"{{label.noKeys}}",text:function(){return e.labels.account.noKeys}}},apps:{},keys:{},dashboard:{},logout:{},ioDocs:{},contact:{},search:{}},s=function(e,a,n){if("[object Object]"===Object.prototype.toString.call(e))for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.call(n,e[t],t,e);else for(var r=0,o=e.length;r<o;r++)a.call(n,e[r],r,e)},i=function(){for(var e={},a=0,n=arguments.length;a<n;a++){var t=arguments[a];!(function(a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&("[object Object]"===Object.prototype.toString.call(a[n])?e[n]=i(!0,e[n],a[n]):e[n]=a[n])})(t)}return e},c=function(e,a){return a&&o[a]&&s(o[a],(function(a){a.placeholder&&a.text&&(e=e.replace(new RegExp(a.placeholder,"g"),a.text))})),s(t,(function(a){a.placeholder&&a.url&&(e=e.replace(new RegExp(a.placeholder,"g"),a.url))})),s(r,(function(a){a.placeholder&&a.text&&(e=e.replace(new RegExp(a.placeholder,"g"),a.text))})),e},l=function(){var a;return a=mashery.loggedIn?'<li id="nav-user-myaccount"><a href="{{account}}">'+e.labels.userNav.account+"</a></li>"+(mashery.isAdmin?'<li><a href="{{dashboard}}">'+e.labels.userNav.dashboard+"</a></li>":"")+'<li id="nav-user-signout"><a href="{{logout}}">'+e.labels.userNav.signout+"</a></li>":'<li id="nav-user-signin"><a href="{{signin}}">'+e.labels.userNav.signin+'</a></li><li id="nav-user-register"><a href="{{register}}">'+e.labels.userNav.register+"</a></li>",c(a)},d=function(e){var a="";return s(e,(function(e){a+='<li><a href="'+decodeURIComponent(e.url)+'">'+e.label+"</a></li>"})),a},u=function(e,a){var n=window.document.getElementsByTagName("script")[0],t=document.createElement(e);s(a,(function(e,a){t.setAttribute(a,e)})),n.parentNode.insertBefore(t,n)},p=function(a,n,t,r){var o=document.querySelector(a);o&&(t&&t(),o.innerHTML=e.templates[n]?c(e.templates[n],n):"",r&&r())},h=function(){if("logout"===window.mashery.contentType){window.mashery.dom.querySelector("#mashery-logout-form")||(window.mashery.loggedIn=!1,window.mashery.username=null,window.mashery.isAdmin=!1,window.mashery.dashboard=null,window.mashery.logout=null)}};a.renderLayout=function(){p("#app","layout",e.callbacks.beforeRenderLayout,e.callbacks.afterRenderLayout),h()},a.renderUserNav=function(){p("#nav-user","userNav",e.callbacks.beforeRenderUserNav,e.callbacks.afterRenderUserNav)},a.renderPrimaryNav=function(){p("#nav-primary","primaryNav",e.callbacks.beforeRenderPrimaryNav,e.callbacks.afterRenderPrimaryNav)},a.renderSecondaryNav=function(){p("#nav-secondary","secondaryNav",e.callbacks.beforeRenderSecondaryNav,e.callbacks.afterRenderSecondaryNav)},a.renderContent=function(a,n){var t=document.querySelector(a);t&&(e.callbacks.beforeRenderFooter(),t.innerHTML=e.templates[n]?c(e.templates[n]):"",e.callbacks.afterRenderFooter())},a.renderMain=function(){p("#main",window.mashery.contentType,e.callbacks.beforeRenderMain,e.callbacks.afterRenderMain)};var m=function(){u("meta",{"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"}),u("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),u("link",{rel:"shortcut icon",href:"/files/favicon.ico"}),u("link",{rel:"icon",sizes:"16x16 32x32",href:"/files/favicon.icon"})},y=function(){window.mashery.logout&&(window.mashery.logoutForm=document.body.insertBefore(window.mashery.logout,document.body.firstChild))},f=function(){window.location.hash?window.location.hash=window.location.hash:document.querySelector("#app").focus()};a.renderMasheryMade=function(){if(!document.querySelector("#mashery-made-logo")){var e=document.querySelector("#app");if(e){var a=document.createElement("div");a.innerHTML='<p>x</p><div id="mashery-made"><div class="container"><p>'+r.masheryMade.text+"</p></div></div>",e.appendChild(a.childNodes[1])}}},a.renderPortal=function(){e.callbacks.beforeRender(),m(),a.renderLayout(),a.renderUserNav(),a.renderPrimaryNav(),a.renderSecondaryNav(),a.renderMain(),a.renderContent("#footer-content-1","footer1"),a.renderContent("#footer-content-2","footer2"),f(),y(),a.renderMasheryMade(),e.callbacks.afterRender(),document.documentElement.classList.remove("loading")};var g=function(e){e.target.closest('a[href="'+t.logout.url+'"')&&window.mashery.logoutForm&&(e.preventDefault(),window.mashery.logoutForm.submit())};return a.init=function(t){loadJS("https://ft-polyfill-service.herokuapp.com/v2/polyfill.min.js",(function(){e=i(n,t||{}),a.renderPortal(),document.addEventListener("click",g,!1)}))},a})();