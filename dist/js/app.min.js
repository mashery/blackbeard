/*! blackbeard v0.0.1 | (c) 2017 Chris Ferdinandi | BSD-3-Clause License | http://github.com/mashery/blackbeard */
!(function(e,a){"function"==typeof define&&define.amd?define([],a(e)):"object"==typeof exports?module.exports=a(e):e.atomic=a(e)})("undefined"!=typeof global?global:this.window||this.global,(function(e){"use strict";var a,t={},r=!!e.XMLHttpRequest&&!!e.JSON,n={type:"GET",url:null,data:{},callback:null,headers:{"Content-type":"application/x-www-form-urlencoded"},responseType:"text",withCredentials:!1},o=function(){for(var e={},a=0;a<arguments.length;a++){var t=arguments[a];!(function(a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&("[object Object]"===Object.prototype.toString.call(a[t])?e[t]=o(!0,e[t],a[t]):e[t]=a[t])})(t)}return e},l=function(e){var t;if("text"!==a.responseType&&""!==a.responseType)return[e.response,e];try{t=JSON.parse(e.responseText)}catch(a){t=e.responseText}return[t,e]},s=function(e){var a="";for(var t in e)e.hasOwnProperty(t)&&(a.length>0&&(a+="&"),a+=encodeURI(t+"="+e[t]));return a},i=function(){var e={success:function(){},error:function(){},always:function(){}},t={success:function(a){return e.success=a,t},error:function(a){return e.error=a,t},always:function(a){return e.always=a,t}},r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){var a=l(r);r.status>=200&&r.status<300?e.success.apply(e,a):e.error.apply(e,a),e.always.apply(e,a)}},r.open(a.type,a.url,!0),r.responseType=a.responseType;for(var n in a.headers)a.headers.hasOwnProperty(n)&&r.setRequestHeader(n,a.headers[n]);return a.withCredentials&&(r.withCredentials=!0),r.send(s(a.data)),t},c=function(){var t=e.document.getElementsByTagName("script")[0],r=e.document.createElement("script");a.data.callback=a.callback,r.src=a.url+(a.url.indexOf("?")+1?"&":"?")+s(a.data),t.parentNode.insertBefore(r,t),r.onload=function(){this.remove()}};return t.ajax=function(e){if(r)return a=o(n,e||{}),"jsonp"===a.type.toLowerCase()?c():i()},t})),mashery.loggedIn=localStorage.getItem("mashIsLoggedIn"),mashery.username=localStorage.getItem("mashUsername")?localStorage.getItem("mashUsername"):mashery.username,(function(e,a,t){"use strict";a.addEventListener("click",(function(e){if((e.target.closest('[href*="signin.html"]')||e.target.closest('[href*="register.html"]'))&&localStorage.setItem("mashSigninReferer",location.href),"signin-submit"===e.target.id||"register-submit"===e.target.id){e.preventDefault(),mashery.loggedIn=!0,localStorage.setItem("mashIsLoggedIn",!0);var t=a.querySelector("#username");t.value.length>0&&(mashery.username=t.value,localStorage.setItem("mashUsername",t.value));var r=localStorage.getItem("mashSigninReferer");r?(localStorage.removeItem("mashSigninReferer"),location.href=r):(loadPortal.renderUserNav(),loadPortal.renderMain())}e.target.closest('[href*="logout.html"]')&&(e.preventDefault(),localStorage.removeItem("mashIsLoggedIn"),mashery.loggedIn=!1,localStorage.removeItem("mashUsername"),loadPortal.renderPortal())}),!1)})(window,document);var loadPortal=(function(){"use strict";var e,a,t,r={},n={logo:null,templates:{layout:'\x3c!-- Skip Nav Link --\x3e<a class="screen-reader screen-reader-focusable" href="#main">Skip to content</a>{{navUser}}{{navPrimary}}{{main}}<footer id="footer">{{footer1}}{{navSecondary}}{{footer2}}</footer>',userNav:'<div class="container"><ul id="nav-user-list" class="list-inline text-small text-muted padding-top-small padding-bottom-small no-margin-bottom text-right">{{navItemsUser}}</ul></div>',primaryNav:'<div class="nav-wrap nav-collapse container padding-top-small padding-bottom-small"><a class="logo" href="index.html">{{logo}}</a><a role="button" class="nav-toggle" data-nav-toggle="#primary-nav-menu" href="#">Menu</a><div class="nav-menu" id="primary-nav-menu"><ul class="nav" id="primary-nav-list">{{navItemsPrimary}}</ul></div></div>',secondaryNav:'<div class="container"><ul id="nav-secondary-list">{{navItemsSecondary}}</ul>',footer1:'<div class="container"><hr></div>',footer2:'<div class="container"><p>{{masheryMade}}</p></div>',signin:'<div class="container"><div class="row"><div class="grid-half"><h1>{{label.heading}}</h1>{{label.subheading}}<div><label for="username">Username</label><input id="username" type="text"></div><div><label for="password">Password</label><input id="password" type="password"></div><div><button id="signin-submit" class="btn">{{label.submit}}</button></div></div><div class="grid-half">{{label.sidebar}}</div></div></div>',register:'<div class="container"><div class="row"><div class="grid-two-thirds"><h1>{{label.heading}}</h1>{{label.subheading}}<div><label for="username">Username</label><input id="username" type="text"></div><div><label for="display-name">Display Name</label><input id="display-name" type="text"></div><div><label for="email">Email</label><input id="email" type="email"></div><div><label for="password">Password</label><input id="password" type="password"></div><div><p><button id="register-submit" class="btn">{{label.submit}}</button></p></div><div><p>By clicking the "Register" button, I certify that I have read and agree to {{registerPolicy}}the <a href="http://www.mashery.com/terms/">Mashery Terms of Service</a> and <a href="http://www.mashery.com/privacy/">Privacy Policy</a>.</p></div></div><div class="grid-third">{{label.sidebar}}</div></div></div>',account:'<div class="container"><h1>{{label.headingMyApiKeys}}</h1><ul id="nav-account"><li><a href="{{keys}}">{{label.keys}}</a></li><li><a href="{{apps}}">{{label.apps}}</a></li><li><a href="{{account}}">{{label.account}}</a></li></ul><p>{{label.noKeys}}</p></div>',logout:'<div class="container"><p>This content needs to get created.</p></div>',docs:'<div class="container"><p>This content needs to get created.</p></div>',ioDocs:'<div class="container"><p>This content needs to get created.</p></div>',contact:'<div class="container"><p>This content needs to get created.</p></div>',search:'<div class="container"><p>This content needs to get created.</p></div>'},labels:{userNav:{signin:"Sign In",register:"Register",username:"Signed in as {{username}}",account:"My Account",dashboard:"Dashboard",signout:"Sign Out"},account:{headingMyApiKeys:"My API Keys",headingMyApps:"My Apps",headingAccount:"Manage Account",keys:"Keys",apps:"Applications",account:"Manage Account",noKeys:"You don't have any keys yet."},signin:{heading:"Sign In",subheading:"<p>Sign in to {{area}} using your Mashery ID.</p>",submit:"Sign In",sidebar:'<h2>Register</h2><p><a href="{{register}}">Create an account</a> to access stagingcs9.mashery.com. Your account information can then be used to access other APIs on the Mashery API Network.</p><h2>What is Mashery?</h2><p><a href="http://mashery.com">Mashery</a> powers APIs of leading brands in retail, media, business services, software, and more. By signing in to a Mashery powered portal, you can gain access to Mashery\'s base of API providers. All with a single Mashery ID.</p><p><a class="btn" href="{{register}}">Register a Mashery ID</a></p>'},register:{heading:"Register for an Account",subheading:"<p>Register a new Mashery ID to access {{area}}.</p>",submit:"Register",sidebar:"<h2>No Spam Guarantee</h2><p>We hate spam. We love our users. We promise to never sell or share any of your private information.</p>",privacyPolicy:""}},callbacks:{beforeRenderLayout:function(){},afterRenderLayout:function(){"index.html"===location.pathname.split("/").pop()&&(document.querySelector("#nav-primary").style.marginBottom="0")},beforeRender:function(){},afterRender:function(){},beforeRenderUserNav:function(){},afterRenderUserNav:function(){},beforeRenderPrimaryNav:function(){},afterRenderPrimaryNav:function(){},beforeRenderSecondaryNav:function(){},afterRenderSecondaryNav:function(){},beforeRenderFooter:function(){},afterRenderFooter:function(){},beforeRenderMain:function(){},afterRenderMain:function(){}}},o={"signin.html":{placeholder:"{{signin}}",url:"signin.html",template:function(){return d(e.templates.signin,"signin")}},"register.html":{placeholder:"{{register}}",url:"register.html",template:function(){return d(e.templates.register,"register")}},"account.html":{placeholder:"{{account}}",url:"account.html",template:function(){return d(e.templates.account,"account")}},"apps.html":{placeholder:"{{apps}}",url:"#",template:null},"keys.html":{placeholder:"{{keys}}",url:"#",template:null},"dashboard.html":{placeholder:"{{dashboard}}",url:"dashboard.html",template:null},"logout.html":{placeholder:"{{logout}}",url:"logout.html",template:function(){return d(e.templates.logout,"logout")}},"docs.html":{placeholder:"{{docs}}",url:"docs.html",template:function(){return d(e.templates.docs,"docs")}},"io-docs.html":{placeholder:"{{iodocs}}",url:"io-docs.html",template:function(){return d(e.templates.ioDocs,"ioDocs")}},"contact.html":{placeholder:"{{contact}}",url:"contact.html",template:function(){return d(e.templates.contact,"contact")}},"search.html":{placeholder:"{{search}}",url:"search.html",template:function(){return d(e.templates.search,"search")}},page:{template:function(){return'<div class="bg-dark bg-hero padding-top padding-bottom" style="background-image: linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6) ), url(https://unsplash.it/1800/800);"><div class="container"><h1>'+t[0].title+"</h1><p>"+t[0].body+'</p><p><a class="btn" href="account.html">Register Now</a> <a href="#">Or learn more about our APIs...</a></div></p></div></div><div class="container padding-top padding-bottom"><h2>'+t[1].title+"</h2><p>"+t[1].body+"</p><p>"+t[2].body+t[3].body+"</p><p>"+t[4].body+"</p></div>"}}},l={area:{placeholder:"{{area}}",text:mashery.area},username:{placeholder:"{{username}}",text:mashery.username},logo:{placeholder:"{{logo}}",text:function(){return e.logo?e.logo:mashery.area}},navItemsUser:{placeholder:"{{navItemsUser}}",text:function(){return u()}},navItemsPrimary:{placeholder:"{{navItemsPrimary}}",text:function(){return p(primaryNavItems)}},navItemsSecondary:{placeholder:"{{navItemsSecondary}}",text:function(){return p(secondaryNavItems)}},registerPolicy:{placeholder:"{{registerPolicy}}",text:function(){return e.labels.register.privacyPolicy}},masheryMade:{placeholder:"{{masheryMade}}",text:'<a id="mashery-made-logo" href="http://mashery.com"><img src="https://support.mashery.com/public/Mashery/images/masherymade.png"></a>'}},s={layout:{navUser:{placeholder:"{{navUser}}",text:'<nav id="nav-user"></nav>'},navPrimary:{placeholder:"{{navPrimary}}",text:'<nav id="nav-primary"></nav>'},navSecondary:{placeholder:"{{navSecondary}}",text:'<nav id="nav-secondary"></nav>'},main:{placeholder:"{{main}}",text:'\x3c!-- tabindex="-1" hack for skipnav link: https://code.google.com/p/chromium/issues/detail?id=37721 --\x3e<main class="tabindex" tabindex="-1" id="main"></main>'},footer1:{placeholder:"{{footer1}}",text:'<div id="footer-content-1"></div>'},footer2:{placeholder:"{{footer2}}",text:'<div id="footer-content-2"></div>'}},signin:{heading:{placeholder:"{{label.heading}}",text:function(){return e.labels.signin.heading}},subheading:{placeholder:"{{label.subheading}}",text:function(){return e.labels.signin.subheading}},submit:{placeholder:"{{label.submit}}",text:function(){return e.labels.signin.submit}},sidebar:{placeholder:"{{label.sidebar}}",text:function(){return e.labels.signin.sidebar}}},register:{heading:{placeholder:"{{label.heading}}",text:function(){return e.labels.register.heading}},subheading:{placeholder:"{{label.subheading}}",text:function(){return e.labels.register.subheading}},submit:{placeholder:"{{label.submit}}",text:function(){return e.labels.register.submit}},sidebar:{placeholder:"{{label.sidebar}}",text:function(){return e.labels.register.sidebar}},privacyPolicy:{placeholder:"{{label.privacyPolicy}}",text:function(){return e.labels.register.privacyPolicy}}},account:{headingMyApiKeys:{placeholder:"{{label.headingMyApiKeys}}",text:function(){return e.labels.account.headingMyApiKeys}},headingMyApps:{placeholder:"{{label.headingMyApps}}",text:function(){return e.labels.account.headingMyApps}},headingAccount:{placeholder:"{{label.headingAccount}}",text:function(){return e.labels.account.headingAccount}},keys:{placeholder:"{{label.keys}}",text:function(){return e.labels.account.keys}},apps:{placeholder:"{{label.apps}}",text:function(){return e.labels.account.apps}},account:{placeholder:"{{label.account}}",text:function(){return e.labels.account.account}},noKeys:{placeholder:"{{label.noKeys}}",text:function(){return e.labels.account.noKeys}}},apps:{},keys:{},dashboard:{},logout:{},docs:{},ioDocs:{},contact:{},search:{}},i=function(e,a,t){if("[object Object]"===Object.prototype.toString.call(e))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.call(t,e[r],r,e);else for(var n=0,o=e.length;n<o;n++)a.call(t,e[n],n,e)},c=function(){for(var e={},a=0,t=arguments.length;a<t;a++){var r=arguments[a];!(function(a){for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&("[object Object]"===Object.prototype.toString.call(a[t])?e[t]=c(!0,e[t],a[t]):e[t]=a[t])})(r)}return e},d=function(e,a){return a&&s[a]&&i(s[a],(function(a){a.placeholder&&a.text&&(e=e.replace(new RegExp(a.placeholder,"g"),a.text))})),i(o,(function(a){a.placeholder&&a.url&&(e=e.replace(new RegExp(a.placeholder,"g"),a.url))})),i(l,(function(a){a.placeholder&&a.text&&(e=e.replace(new RegExp(a.placeholder,"g"),a.text))})),e},u=function(){var a;return a=mashery.loggedIn?'<li id="nav-user-username">'+e.labels.userNav.username+'</li><li id="nav-user-myaccount"><a href="{{account}}">'+e.labels.userNav.account+"</a></li>"+(mashery.isAdmin?'<li><a href="{{dashboard}}">'+e.labels.userNav.dashboard+"</a></li>":"")+'<li id="nav-user-signout"><a href="{{logout}}">'+e.labels.userNav.signout+"</a></li>":'<li id="nav-user-signin"><a href="{{signin}}">'+e.labels.userNav.signin+'</a></li><li id="nav-user-register"><a href="{{register}}">'+e.labels.userNav.register+"</a></li>",d(a)},p=function(e){var a="";return i(e,(function(e){a+='<li><a href="'+e.url+'">'+e.label+"</a></li>"})),a},h=function(){var t,r=location.pathname.split("/").pop();t=o[r]&&o[r].template?o[r].template():o.page.template(),e.callbacks.beforeRenderMain(),a.innerHTML=t,e.callbacks.afterRenderMain()},m=function(a,t,r,n){var o=document.querySelector(a);o&&(r&&r(),o.innerHTML=e.templates[t]?d(e.templates[t],t):"",n&&n())};return r.renderLayout=function(){m("#app","layout",e.callbacks.beforeRenderLayout,e.callbacks.afterRenderLayout)},r.renderUserNav=function(){m("#nav-user","userNav",e.callbacks.beforeRenderUserNav,e.callbacks.afterRenderUserNav)},r.renderPrimaryNav=function(){m("#nav-primary","primaryNav",e.callbacks.beforeRenderPrimaryNav,e.callbacks.afterRenderPrimaryNav)},r.renderSecondaryNav=function(){m("#nav-secondary","secondaryNav",e.callbacks.beforeRenderSecondaryNav,e.callbacks.afterRenderSecondaryNav)},r.renderContent=function(a,t){var r=document.querySelector(a);r&&(e.callbacks.beforeRenderFooter(),r.innerHTML=e.templates[t]?d(e.templates[t]):"",e.callbacks.afterRenderFooter())},r.renderMain=function(){(a=document.querySelector("#main"))&&atomic.ajax({url:"https://jsonplaceholder.typicode.com/posts"}).success((function(e){t=e,h()}))},r.renderMasheryMade=function(){if(!document.querySelector("#mashery-made-logo")){var e=document.querySelector("#app");if(e){var a=document.createElement("div");a.innerHTML='<p>x</p><div id="mashery-made"><div class="container"><p>'+l.masheryMade.text+"</p></div></div>",e.appendChild(a.childNodes[1])}}},r.renderPortal=function(){e.callbacks.beforeRender(),r.renderLayout(),r.renderUserNav(),r.renderPrimaryNav(),r.renderSecondaryNav(),r.renderMain(),r.renderContent("#footer-content-1","footer1"),r.renderContent("#footer-content-2","footer2"),r.renderMasheryMade(),e.callbacks.afterRender(),document.documentElement.classList.remove("loading")},r.init=function(a){a=localStorage.getItem("mashDemoOptions"),a&&(a=JSON.parse(a)),e=c(n,a||{}),r.renderPortal()},r})();